
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุฑุงุณู ุงููุงุชุณุงุจ ุงููุจุงุดุฑ - ูุงูุจ ุซุงุจุช</title>
    
    <link rel="stylesheet" href="style.css?v=20251221">
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="manifest" href="manifest.json?v=20251221">
    <link rel="shortcut icon" href="whatsapp-icon.png" type="image/png">
</head>
<body>
    
    <div class="page-wrapper" id="pageWrapper"> 
        
        <h1 class="app-heading">ูุฑุงุณู ุงููุงุชุณุงุจ ุงููุจุงุดุฑ</h1>
        <p class="description">ุฃุณุฑุน ุทุฑููุฉ ููุชูุงุตูุ ุฃุฏุฎู ุงูุฑูู ูุงุจุฏุฃ ุงููุญุงุฏุซุฉ ููุฑุงู.</p>

        <button id="installButton" class="install-prompt-button" style="display: none;">
            ๐ฒ ุชุซุจูุช ุงูุชุทุจูู
        </button>
        
        <div class="input-group">
            <label for="countryInput">ุงุฎุชุฑ ุงูุฏููุฉ ุฃู ุงุจุญุซ ุนููุง:</label>
            <input 
                list="country-options" 
                id="countryInput" 
                name="country-input" 
                placeholder="ุงุจุญุซ ุนู ุงูุฏููุฉ (ูุซุงู: ุงูุณูุฏุงู (+249))" 
                value="ุงูุณูุฏุงู (+249)"
                onchange="updateCodeFromCountry(this.value)"
            >
            
            <datalist id="country-options">
                <option value="ุงูุณูุฏุงู (+249)">
                <option value="ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ (+966)">
                <option value="ุงูุฅูุงุฑุงุช ุงูุนุฑุจูุฉ ุงููุชุญุฏุฉ (+971)">
                <option value="ูุตุฑ (+20)">
                <option value="ุงูููุงูุงุช ุงููุชุญุฏุฉ ุงูุฃูุฑูููุฉ (+1)">
                <option value="ุงูููููุฉ ุงููุชุญุฏุฉ (+44)">
                <option value="ุงูุฌุฒุงุฆุฑ (+213)"> 
                <option value="ุงูุฃุฑุฏู (+962)"> 
                <option value="ุงููููุช (+965)"> 
                <option value="ูุทุฑ (+974)"> 
                <option value="ุนููุงู (+968)">
                <option value="ุงูููู (+967)">
                <option value="ููุจูุง (+218)">
                <option value="ุงููุบุฑุจ (+212)">
                <option value="ููุณุทูู (+970)">
                <option value="ุงูุนุฑุงู (+964)">
                <option value="ุณูุฑูุง (+963)">
                <option value="ูุจูุงู (+961)">
                <option value="ุชููุณ (+216)">
                <option value="ุฃูุบุงูุณุชุงู (+93)"> <option value="ุฃูุจุงููุง (+355)">
                <option value="ุฃูุฏูุฑุง (+376)"> <option value="ุฃูุบููุง (+244)">
                <option value="ุงูุฃุฑุฌูุชูู (+54)"> <option value="ุฃุฑููููุง (+374)">
                <option value="ุฃุณุชุฑุงููุง (+61)"> <option value="ุงูููุณุง (+43)">
                <option value="ุฃุฐุฑุจูุฌุงู (+994)"> <option value="ุงูุจุญุฑูู (+973)">
                <option value="ุจูุบูุงุฏูุด (+880)"> <option value="ุจูุฌููุง (+32)">
                <option value="ุงูุจุฑุงุฒูู (+55)"> <option value="ุจูุบุงุฑูุง (+359)">
                <option value="ููุฏุง (+1)"> <option value="ุชุดููู (+56)">
                <option value="ุงูุตูู (+86)"> <option value="ูููููุจูุง (+57)">
                <option value="ูุฑูุงุชูุง (+385)"> <option value="ููุจุง (+53)">
                <option value="ูุจุฑุต (+357)"> <option value="ุงูุฏููุงุฑู (+45)">
                <option value="ุงูุฅููุงุฏูุฑ (+593)"> <option value="ุฅุซููุจูุง (+251)">
                <option value="ููููุฏุง (+358)"> <option value="ูุฑูุณุง (+33)">
                <option value="ุฃููุงููุง (+49)"> <option value="ุงููููุงู (+30)">
                <option value="ุงูููุฏ (+91)"> <option value="ุฅูุฏูููุณูุง (+62)">
                <option value="ุฃูุฑููุฏุง (+353)"> <option value="ุฅุณุฑุงุฆูู (+972)">
                <option value="ุฅูุทุงููุง (+39)"> <option value="ุงููุงุจุงู (+81)">
                <option value="ููููุง (+254)"> <option value="ููุฑูุง ุงูุฌููุจูุฉ (+82)">
                <option value="ุงูููุณูู (+52)"> <option value="ููุฌูุฑูุง (+234)">
                <option value="ุงููุฑููุฌ (+47)"> <option value="ุจุงูุณุชุงู (+92)">
                <option value="ุจูุฑู (+51)"> <option value="ุงูููุจูู (+63)">
                <option value="ุจูููุฏุง (+48)"> <option value="ุงูุจุฑุชุบุงู (+351)">
                <option value="ุฑูุณูุง (+7)"> <option value="ุณูุบุงููุฑุฉ (+65)">
                <option value="ุงูุตููุงู (+252)"> <option value="ุฌููุจ ุฃูุฑูููุง (+27)">
                <option value="ุฅุณุจุงููุง (+34)"> <option value="ุงูุณููุฏ (+46)">
                <option value="ุณููุณุฑุง (+41)"> <option value="ุชุฑููุง (+90)">
                <option value="ุฃููุฑุงููุง (+380)"> <option value="ููุฒูููุง (+58)">
                <option value="ุฒููุจุงุจูู (+263)">
            </datalist>
        </div>

        <div class="phone-input-container">
            <div class="country-code-wrapper">
                <span id="currentFlag" class="flag-icon flag-icon-sd"></span>
                <input 
                    type="tel" 
                    id="codeInput" 
                    value="+249" 
                    inputmode="numeric" 
                    oninput="updateCountryFromCode(this.value)"
                    placeholder="ุฑูุฒ ุงูุฏููุฉ"
                >
            </div>
            <input type="tel" id="phoneInput" placeholder="ุฃุฏุฎู ุงูุฑูู ุงููุญูู (ุจุฏูู ุงูุฑูุฒ)" inputmode="numeric">
        </div>

        <button id="whatsappButton" onclick="openWhatsApp()">
            <img src="whatsapp-icon.png" alt="WhatsApp Icon" class="icon"> ุจุฏุก ุงููุญุงุฏุซุฉ ุงูุขู
        </button>

        <p class="note prominent-note">ูุฑุฌู ุงูุชุฃูุฏ ูู ุตุญุฉ ุฑูุฒ ุงูุฏููุฉ ุงููุฏุฎู.</p>

        <div class="share-section">
            <p class="share-title">ุดุงุฑู ุงูุชุทุจูู ูุน ุฃุตุฏูุงุฆู:</p>
            <div class="share-icons">
                <button class="share-btn facebook" onclick="shareApp('facebook')"><i class="fab fa-facebook-f"></i></button>
                <button class="share-btn messenger" onclick="shareApp('messenger')"><i class="fab fa-facebook-messenger"></i></button>
                <button class="share-btn whatsapp" onclick="shareApp('whatsapp')"><i class="fab fa-whatsapp"></i></button>
            </div>
        </div>
        
        <footer class="app-footer">
            <a href="https://linktr.ee/abdul3ziz95" target="_blank" class="contact-link bold-link">๐ ุงุชุตู ุจู</a>
            <p class="copyright-text">ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025. <span class="owner-name">Abdul3ziz95</span></p>
        </footer>
        
    </div>
    
    <script>
        const APP_LINK = 'https://abdul3ziz95.github.io/zool/';
        const SHARE_MESSAGE = 'ุฌุฑุจูุง ูุฑุงุณู ุงููุงุชุณุงุจ ุงูุณูุฏุงูู ุงูููุฑู! ุฃุณุฑุน ุทุฑููุฉ ูุจุฏุก ูุญุงุฏุซุฉ ุฏูู ุญูุธ ุงูุฑูู. ุงูุฑุงุจุท: ' + APP_LINK;

        const codeInput = document.getElementById('codeInput'); 
        const phoneInput = document.getElementById('phoneInput'); 
        const countryInput = document.getElementById('countryInput');
        const currentFlagSpan = document.getElementById('currentFlag');
        const installButton = document.getElementById('installButton');
        
        // ุฎุฑูุทุฉ ููุงุชูุญ ุงูุฏูู ูุฑุจุท ุงูุฑูุฒ ุจุงูุนูู ูุงูุงุณู
        const countryMap = {
            '249': { name: 'ุงูุณูุฏุงู', iso: 'sd' }, '966': { name: 'ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ', iso: 'sa' },
            '971': { name: 'ุงูุฅูุงุฑุงุช ุงูุนุฑุจูุฉ ุงููุชุญุฏุฉ', iso: 'ae' }, '20': { name: 'ูุตุฑ', iso: 'eg' },
            '1': { name: 'ุงูููุงูุงุช ุงููุชุญุฏุฉ ุงูุฃูุฑูููุฉ', iso: 'us' }, '44': { name: 'ุงูููููุฉ ุงููุชุญุฏุฉ', iso: 'gb' },
            '213': { name: 'ุงูุฌุฒุงุฆุฑ', iso: 'dz' }, '962': { name: 'ุงูุฃุฑุฏู', iso: 'jo' },
            '965': { name: 'ุงููููุช', iso: 'kw' }, '974': { name: 'ูุทุฑ', iso: 'qa' },
            '968': { name: 'ุนููุงู', iso: 'om' }, '967': { name: 'ุงูููู', iso: 'ye' },
            '218': { name: 'ููุจูุง', iso: 'ly' }, '212': { name: 'ุงููุบุฑุจ', iso: 'ma' },
            '970': { name: 'ููุณุทูู', iso: 'ps' }, '964': { name: 'ุงูุนุฑุงู', iso: 'iq' },
            '963': { name: 'ุณูุฑูุง', iso: 'sy' }, '961': { name: 'ูุจูุงู', iso: 'lb' },
            '216': { name: 'ุชููุณ', iso: 'tn' }, '93': { name: 'ุฃูุบุงูุณุชุงู', iso: 'af' },
            '355': { name: 'ุฃูุจุงููุง', iso: 'al' }, '376': { name: 'ุฃูุฏูุฑุง', iso: 'ad' },
            '244': { name: 'ุฃูุบููุง', iso: 'ao' }, '54': { name: 'ุงูุฃุฑุฌูุชูู', iso: 'ar' },
            '374': { name: 'ุฃุฑููููุง', iso: 'am' }, '61': { name: 'ุฃุณุชุฑุงููุง', iso: 'au' },
            '43': { name: 'ุงูููุณุง', iso: 'at' }, '994': { name: 'ุฃุฐุฑุจูุฌุงู', iso: 'az' },
            '973': { name: 'ุงูุจุญุฑูู', iso: 'bh' }, '880': { name: 'ุจูุบูุงุฏูุด', iso: 'bd' },
            '32': { name: 'ุจูุฌููุง', iso: 'be' }, '55': { name: 'ุงูุจุฑุงุฒูู', iso: 'br' },
            '359': { name: 'ุจูุบุงุฑูุง', iso: 'bg' }, '56': { name: 'ุชุดููู', iso: 'cl' },
            '86': { name: 'ุงูุตูู', iso: 'cn' }, '57': { name: 'ูููููุจูุง', iso: 'co' },
            '385': { name: 'ูุฑูุงุชูุง', iso: 'hr' }, '53': { name: 'ููุจุง', iso: 'cu' },
            '357': { name: 'ูุจุฑุต', iso: 'cy' }, '45': { name: 'ุงูุฏููุงุฑู', iso: 'dk' },
            '593': { name: 'ุงูุฅููุงุฏูุฑ', iso: 'ec' }, '251': { name: 'ุฅุซููุจูุง', iso: 'et' },
            '358': { name: 'ููููุฏุง', iso: 'fi' }, '33': { name: 'ูุฑูุณุง', iso: 'fr' },
            '49': { name: 'ุฃููุงููุง', iso: 'de' }, '30': { name: 'ุงููููุงู', iso: 'gr' },
            '91': { name: 'ุงูููุฏ', iso: 'in' }, '62': { name: 'ุฅูุฏูููุณูุง', iso: 'id' },
            '353': { name: 'ุฃูุฑููุฏุง', iso: 'ie' }, '972': { name: 'ุฅุณุฑุงุฆูู', iso: 'il' },
            '39': { name: 'ุฅูุทุงููุง', iso: 'it' }, '81': { name: 'ุงููุงุจุงู', iso: 'jp' },
            '254': { name: 'ููููุง', iso: 'ke' }, '82': { name: 'ููุฑูุง ุงูุฌููุจูุฉ', iso: 'kr' },
            '52': { name: 'ุงูููุณูู', iso: 'mx' }, '234': { name: 'ููุฌูุฑูุง', iso: 'ng' },
            '47': { name: 'ุงููุฑููุฌ', iso: 'no' }, '92': { name: 'ุจุงูุณุชุงู', iso: 'pk' },
            '51': { name: 'ุจูุฑู', iso: 'pe' }, '63': { name: 'ุงูููุจูู', iso: 'ph' },
            '48': { name: 'ุจูููุฏุง', iso: 'pl' }, '351': { name: 'ุงูุจุฑุชุบุงู', iso: 'pt' },
            '7': { name: 'ุฑูุณูุง', iso: 'ru' }, '65': { name: 'ุณูุบุงููุฑุฉ', iso: 'sg' },
            '252': { name: 'ุงูุตููุงู', iso: 'so' }, '27': { name: 'ุฌููุจ ุฃูุฑูููุง', iso: 'za' },
            '34': { name: 'ุฅุณุจุงููุง', iso: 'es' }, '46': { name: 'ุงูุณููุฏ', iso: 'se' },
            '41': { name: 'ุณููุณุฑุง', iso: 'ch' }, '90': { name: 'ุชุฑููุง', iso: 'tr' },
            '380': { name: 'ุฃููุฑุงููุง', iso: 'ua' }, '58': { name: 'ููุฒูููุง', iso: 've' },
            '263': { name: 'ุฒููุจุงุจูู', iso: 'zw' }
        };
        // ุฎุฑูุทุฉ ูุนููุณุฉ ูุชุณููู ุงูุจุญุซ ุจุงูุฑูุฒ
        const codeMap = {};
        for (const code in countryMap) {
            codeMap[code] = countryMap[code];
        }


        // ************** 1. ูุธุงุฆู ุงูุชุญูู ูู ุงูุฏููุฉ ูุงูุฑูุฒ **************

        // ูุธููุฉ ุชุณุชุฏุนู ุนูุฏ ุงุฎุชูุงุฑ ุงูุฏููุฉ ูู ุงููุงุฆูุฉ (datalist)
        function updateCodeFromCountry(selectedValue) {
            const match = selectedValue.match(/\((\+)(\d+)\)/);
            const code = match ? match[2] : '';
            
            if (code) {
                codeInput.value = `+${code}`;
                updateFlagAndName(code);
            } else {
                // ุฅุฐุง ูุชุจ ุงููุณุชุฎุฏู ูุตุงู ุบูุฑ ููุฌูุฏ ูู ุงููุงุฆูุฉุ ูุธู ุงูุญูู ูุฃุจู ุนูู ุงูุฑูุฒ
                updateFlagAndName(codeInput.value.replace('+', '').trim());
            }
        }

        // ูุธููุฉ ุชุณุชุฏุนู ุนูุฏ ูุชุงุจุฉ ุงูุฑูุฒ ูุฏููุงู
        function updateCountryFromCode(inputValue) {
            const code = inputValue.replace('+', '').trim(); 
            
            if (code && code.length >= 1) {
                updateFlagAndName(code);
            } else {
                // ุงูุนูุฏุฉ ุฅูู ุงูุณูุฏุงู ุฅุฐุง ุญูุฐู ุงูุฑูุฒ
                updateFlagAndName('249');
            }
        }

        // ูุธููุฉ ุงูุชุญุฏูุซ ุงูุฑุฆูุณูุฉ (ุชุถุจุท ุงูุนูู ูุญูู ุงูุฏููุฉ)
        function updateFlagAndName(code) {
            const countryInfo = codeMap[code];

            if (countryInfo) {
                // ุชุญุฏูุซ ุงูุนูู ูุญูู ุงูุฑูุฒ
                currentFlagSpan.className = `flag-icon flag-icon-${countryInfo.iso.toLowerCase()}`;
                codeInput.value = `+${code}`;
                
                // ุชุญุฏูุซ ุญูู ุงูุฏููุฉ ููุนูุณ ุงูุงุฎุชูุงุฑ
                countryInput.value = `${countryInfo.name} (+${code})`;
            } else {
                 // ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุฑูุฒ
                currentFlagSpan.className = `flag-icon flag-icon-un`; // ุนูู ุงูุชุฑุงุถู
                
                // ุฅุฐุง ูุงู ุงูุฅุฏุฎุงู ูุฏููุงูุ ุงุญุชูุธ ุจู ููู ุฃุฒู ุงูุฅุดุงุฑุฉ
                if (!codeInput.value.startsWith('+')) {
                     codeInput.value = `+${code}`;
                }
            }
        }
        
        // ุนูุฏ ุงูุชุญูููุ ุชุฃูุฏ ูู ุชุญุฏูุซ ุงููุงุฌูุฉ ุจูุงุกู ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ
        window.addEventListener('load', () => {
             updateFlagAndName(codeInput.value.replace('+', '').trim());
             initializeApp();
        });


        // ************** 2. ูุธุงุฆู ุงููุงุฌูุฉ ูุงูุฃุฏุงุก (PWA & Fixes) **************
        
        function openWhatsApp() {
            const code = codeInput.value.replace('+', '').trim(); 
            const localNumber = phoneInput.value.trim().replace(/[\s+-]/g, '');

            if (!code || code.length < 1 || !localNumber || localNumber.length < 6) {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑูุฒ ุงูุฏููุฉ ูุฑูู ูุงุชู ูุญูู ุตุงูุญ (ูุง ููู ุนู 6 ุฃุฑูุงู).');
                return;
            }

            const fullNumber = code + localNumber;
            const whatsappLink = 'https://wa.me/' + fullNumber;
            window.open(whatsappLink, '_blank');
        }

        function shareApp(platform) {
            // (ููุฏ ุงููุดุงุฑูุฉ ุจุฏูู ุชุบููุฑ)
            let url = '';
            const finalLink = APP_LINK + '?source=share'; 
            const finalMessage = SHARE_MESSAGE.replace(APP_LINK, finalLink);
            switch (platform) {
                case 'whatsapp':
                    url = `https://wa.me/?text=${encodeURIComponent(finalMessage)}`;
                    break;
                case 'messenger':
                    url = `https://www.facebook.com/dialog/send?link=${encodeURIComponent(finalLink)}&app_id=1234567890&redirect_uri=${encodeURIComponent(finalLink)}`;
                    break;
                case 'facebook':
                    url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(finalLink)}`;
                    break;
                default:
                    return;
            }
            window.open(url, '_blank', 'width=600,height=400');
        }
        
        function initializeApp() {
            // ** ุงูุญู ุงูููุงุฆู ูููุน ุงูุชุฒุงุฒ ุงูุดุงุดุฉ ุนูู ุงูุฌูุงู **
            function setVhProperty() {
                let vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
                document.getElementById('pageWrapper').style.transform = 'translateZ(0)';
            }
            setVhProperty();
            window.addEventListener('resize', setVhProperty);
            
            // ุชููุฆุฉ PWA (ูุถูุงู ุงูุชุญุฏูุซ ูุฅูุบุงุก ุงููุงุด ุงููุฏูู)
            setupPWA();
        }
        
        let deferredPrompt; 
        function setupPWA() {
             if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(function(registrations) {
                    for(let registration of registrations) {
                        if(registration.scope.includes('/zool/')) {
                           registration.unregister().catch((err) => { console.error('Failed to unregister SW:', err); });
                        }
                    }
                });
                // ุชุณุฌูู Service Worker ุงูุฌุฏูุฏ
                 navigator.serviceWorker.register('/zool/sw.js?v=20251221', { scope: '/zool/' }) 
                    .catch((err) => { console.log('SW registration failed (new version):', err); });
            }
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e; 
                installButton.style.display = 'block'; 
            });

            installButton.addEventListener('click', () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            installButton.style.display = 'none'; 
                        }
                        deferredPrompt = null; 
                    });
                } else {
                    alert('ูุชุซุจูุช ุงูุชุทุจูู: ุงูุชุญ ูุงุฆูุฉ ุงููุชุตูุญ (โฎ) ูุงุฎุชุฑ "ุงูุชุซุจูุช".');
                }
            });
        }

        // ูุถุน ุงูุฏูุงู ูู ุงููุทุงู ุงูุนุงู
        window.openWhatsApp = openWhatsApp;
        window.shareApp = shareApp;
        window.updateCodeFromCountry = updateCodeFromCountry;
        window.updateCountryFromCode = updateCountryFromCode;
        
    </script>
</body>
</html>
